var sf=function(){var t=function(t,n){i.prototype=Array.prototype;for(var s=e(new i),o=r(s),n=n?n.length?n[0]:n:document,a=[].slice.call("string"!=typeof t?[t]:n.querySelectorAll(t)),c=0;c!=a.length;c++)o.push(a[c]);return o},e=function(t){var e=function(){};e.prototype=t;var n=new e;return n},n=function(t,e){for(var n=t.length;n--;)e.apply(t[n],[t[n]])};t.ready=function(e,n){var n=n&&"object"==typeof n?n:window;"complete"==document.readyState?e.apply(n):t(document).addEv("readystatechange",function(){"complete"==document.readyState&&e.apply(n)})},t.requireCss=function(t){var e=this,t=Array.isArray(t)?t:[t];n(t,function(t){var n=e.newNode("link");e(n).attr("rel","stylesheet"),e(n).attr("type","text/css"),e(n).attr("href",t),!e('head > link[href="'+t+'"]').length&&e.addNode(n,document.head)})},t.requireJs=function(t){var e=this,t=Array.isArray(t)?t:[t];n(t,function(t){var n=e.newNode("script");e(n).attr("src",t),!e('body > script[src="'+t+'"]').length&&e.addNode(n)})};var s={get:function(t,e,n){Object.defineProperty(t,e,{get:n,configurable:!0})},set:function(t,e,n){Object.defineProperty(t,e,{set:n,configurable:!0})}},r=function(t){return s.get(t,"inner",t.getInner),s.set(t,"inner",t.setInner),s.get(t,"class",t.getClass),s.set(t,"class",t.setClass),s.get(t,"style",t.getStyle),s.set(t,"style",t.setStyle),t},i=function(){this.getInner=function(){var t=this;return 1==this.length?this[0].innerHTML:function(){var e=[];return n(t,function(t){e.push(t.innerHTML)}),e.reverse()}()},this.setInner=function(t){n(this,function(e){e.innerHTML=t})},this.getClass=function(){var t=this;return 1==this.length?this[0].className:function(){var e=[];return n(t,function(t){e.push(t.className)}),e.reverse()}()},this.setClass=function(t){n(this,function(e){e.setAttribute("class",t)})},this.getStyle=function(){var t=this;return 1==this.length?function(){var e=t[0].style.cssText.split(";");return e.pop(),e}():function(){var e=[];return n(t,function(t){e.push(t.style.cssText)}),e.reverse()}()},this.setStyle=function(t){var e="";for(key in t)e+=key+":"+t[key]+";";n(this,function(t){t.style.cssText=e})},this.css=function(t,e){return"undefined"!=typeof e?this.setCss(t,e):this.getCss(t)},this.getCss=function(t){var e=this;return 1==this.length?this[0].style[t]:function(){var s=[];return n(e,function(e){s.push(e.style[t])}),s.reverse()}()},this.setCss=function(t,e){n(this,function(n){n.style[t]=e})},this.attr=function(t,e){return"undefined"!=typeof e?this.setAttr(t,e):this.getAttr(t)},this.setAttr=function(t,e){n(this,function(n){n.setAttribute(t,e)})},this.getAttr=function(t){var e=this;return 1==this.length?this[0].getAttribute(t):function(){var s=[];return n(e,function(e){s.push(e.getAttribute(t))}),s.reverse()}()},this.addAttr=function(t,e){n(this,function(n){var s=n.getAttribute(t)||e;n.setAttribute(t,s.match(e)?s:s+" "+e)})},this.rmAttr=function(t,e){n(this,function(n){var s=(n.getAttribute(t)||e).replace(e,"").replace(/(^\s+|\s+$)/,"");s?n.setAttribute(t,s):n.removeAttribute(t)})},this.addEv=function(t,e,s){return n(this,function(n){var s=s?s:!1;n.addEventListener(t,e,s)}),e},this.rmEv=function(t,e,s){n(this,function(n){var s=s?s:!1;n.removeEventListener(t,e,s)})},this.parent=function(){return t(this[0].parentNode)},this.children=function(){return t(this.stringNode()+" > *")},this.index=function(){return this.parent().children().indexOf(this[0])},this.next=function(){return this[0].nextElementSibling?t(this[0].nextElementSibling):this.first()},this.prev=function(){return this[0].previousElementSibling?t(this[0].previousElementSibling):this.last()},this.first=function(){return t(this.parent()[0].firstElementChild)},this.last=function(){return t(this.parent()[this.length-1].lastElementChild)},this.stringNode=function(){var t=this[0].nodeName.toLowerCase();return this[0].id?t+="#"+this[0].id:this[0].className&&(t+="."+this[0].className.split(" ").join(".")),t},this.cssPath=function(){for(var t=this.stringNode()+" ",e=this.parent();;){if(!e.stringNode()||"#document"==e.stringNode())break;t+="html"!=e.stringNode()?e.stringNode()+" ":e.stringNode(),e=e.parent()}return t=t.split(" ").reverse().join(" > ")},this.each=function(t){n(this,t)}};return t}();sf.ajax=function(){var t=function(t){t.dst=t.dst&&"string"==typeof t.dst?t.dst:"/",t.callback=t.callback&&"function"==typeof t.callback?t.callback:function(){},t.fallback=t.fallback&&"function"==typeof t.fallback?t.fallback:function(){},t.method=t.method&&"string"==typeof t.method?t.method:"POST",t.headers=t.headers&&"object"==typeof t.headers?t.headers:{},t.context=t.context&&"object"==typeof t.context?t.context:{};var e=new XMLHttpRequest;return 4==e.readyState||0==e.readyState?function(){e.open(t.method,t.dst,!0),e.onreadystatechange=function(){4==e.readyState&&function(){200==e.status?t.callback.apply(t.context,[e]):t.fallback.apply(t.context,[e])}()};for(h in t.headers)e.setRequestHeader(h,t.headers[h]);return e.setRequestHeader("X-REQUESTED-WITH","XMLHttpRequest"),e}():t.fallback?t.fallback(e):!1};return t.json=function(t,e,n,s,r){var e=e&&"object"==typeof e?e:{},i={dst:t,callback:n,fallback:s,context:r,headers:{"Content-type":"application/json"}},o=this(i);o&&o.send(JSON.stringify(e))},t}(),sf.alert=function(t,e,n,s){sf.requireCss("css/sf.css"),self=this;var r,n=n?n:"#3B414F",e=e?'<h1 class="sf-Alert-Title" style="color: '+n+';">'+e+"</h1>":"",t=t?'<div class="sf-Alert-Content">'+t+"</div>":"",s=s?s:"",i=self("#sf-Alerts")[0];!i&&function(){i=self.newNode("div"),i.id="sf-Alerts",self.addNode(i)}();var o=self.newNode("div");o.className="sf-Alert",o.onclick=function(){clearTimeout(r),self.rmNode(o)},o.style.fontFamily=s,o.style.opacity="0.97",o.innerHTML=e+t,self.addNode(o,i),r=setTimeout(function(){o.style.opacity="0",setTimeout(function(){self.rmNode(o)},300)},5e3)},sf.animate=function(){var t=function(t){var e=performance.now();requestAnimationFrame(function n(s){var r=(s-e)/t.duration;r>1&&(r=1);var i=t.timing(r);t.draw(100*i),1>r&&requestAnimationFrame(n)})};return t.linear=function(t){t.timing=function(t){return t},this(t)},t.cubic=function(t,e){var e=e?e:[.65,.05,.36,1],n=[0,0],s=[e[0],e[1]],r=[e[2],e[3]],i=[1,1];t.timing=function(t){var e=Math.pow(1-t,3)*n[0]+3*Math.pow(1-t,2)*t*s[0];e=e+3*(1-t)*Math.pow(t,2)*r[0]+Math.pow(t,3)*i[0];var o=Math.pow(1-t,3)*n[1]+3*Math.pow(1-t,2)*t*s[1];return o=o+3*(1-t)*Math.pow(t,2)*r[1]+Math.pow(t,3)*i[1]},this(t)},t}(),sf.changeURL=function(t){history.pushState(null,null,t),history.replaceState(null,null,t)},sf.drag=function(t,e,n,s){var r=[];e.attr("draggable","true"),e.addEv("dragstart",function(t){var t=t?t:window.event,e=t.dataTransfer,r=sf(this),i=s?sf("["+s+'="object-'+r.attr(s)+'"]'):r;e.setDragImage(i[0],t.layerX,t.layerY),e.setData("text",r.attr("data-id")),i.css("opacity","0.4"),n.addAttr("class","drop-place")}),n.addEv("dragover",function(){var e=sf(this),s=e.attr("data-id");e.addAttr("class","drop-hover"),r["dragleave"+s]=r["dragleave"+s]?r["dragleave"+s]:e.addEv("dragleave",function(){n.rmAttr("class","drop-hover")}),r["dragover"+s]=r["dragover"+s]?r["dragover"+s]:e.addEv("dragover",function(t){var t=t?t:window.event;t.preventDefault()}),r["drop"+s]=r["drop"+s]?r["drop"+s]:e.addEv("drop",t)}),e.addEv("dragend",function(){var t=sf(this),e=s?sf("["+s+'="object-'+t.attr(s)+'"]'):t;e.css("opacity","1"),n.rmAttr("class","drop-place"),n.rmAttr("class","drop-hover")})},sf.newNode=function(t){return t?document.createElement(t):!1},sf.cloneNode=function(t){var t=t.length?t[0]:t;return t?t.cloneNode(!0):!1},sf.addNode=function(t,e){var t=t.length?t[0]:t,e=e?e.length?e[0]:e:document.body;t?e.appendChild(t):!1},sf.addNodeBefore=function(t,e){var t=t.length?t[0]:t,e=e.length?e[0]:e;t&&e?e.parentNode.insertBefore(t,e):!1},sf.rmNode=function(t){var t=t.length?t[0]:t;return t?t.parentNode.removeChild(t):!1},sf.getNodeInfo=function(t){var t=t.length?t[0]:t;return t?t.getBoundingClientRect():!1},sf.notify=function(t,e){self=this.notify,self.init(),self.push(t,e),self.pop()},sf.notify.queue=[],sf.notify.init=function(){sf.requireCss("css/sf.css");var t=sf("body>#sf-notifys")[0];t||(t=sf.newNode("div"),t.id="sf-notifys"),sf.addNode(t),this.container=t},sf.notify.push=function(t,e){this.queue.push({text:t,type:e?e:""})},sf.notify.pop=function(t){for(var t=t?t:this.queue.length;t--&&this.queue.length;)this.show(this.queue.shift())},sf.notify.show=function(t){var e=t.type,n=t.text?'<div class="text">'+t.text+"</div>":"";t=sf.newNode("div"),t.className="sf-notify "+e,t.innerHTML=n,sf.addNode(t,this.container);var s;t.onclick=function(){clearTimeout(s),sf.rmNode(t)},s=setTimeout(function(){setTimeout(function(){sf.rmNode(t)},300)},5e3)},sf.popup=function(t,e){sf.requireCss("css/sf.css");var n=this;n("#sf-popupContainer")[0]?n.rmNode(n("#sf-popupContainer")):"";var s=e?'style="background-image: url('+e+');"':"",r=n.newNode("div");r.id="sf-popupContainer",r.innerHTML='<div id="sf-popupLine"'+s+'></div><div id="sf-popupContent"></div>',r.onclick=function(t){var t=t?t:window.event;t.target.id==r.id?n.rmNode(r):""},n.addNode(r),setTimeout(function(){n("#sf-popupContent").inner=t},100)},sf.zoomImg=function(t){var e=this,n='<img src="'+t+'" id="sf-popupImg" alt="Увеличенное изображение" />';e.popup(n)};